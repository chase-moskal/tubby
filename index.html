<!doctype html>
<html class="tubby">
	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>tubby — youtube channel instant search</title>
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Neuton:400,800"/>
		<link rel="stylesheet" href="dist/tubby.css"/>
	</head>
	<body>
		<header class="siteheader">
			<h1>
				<strong>tubby</strong>
				<span>— youtube channel instant search</span>
			</h1>
			<div>
				<p>sourcecode at <a href="https://github.com/chase-moskal/tubby">github.com/chase-moskal/tubby</a></p>
				<p>by <a href="https://chasemoskal.com">chase moskal</a></p>
			</div>
		</header>
		<main>
			<section class="textcontent">
				<h2>tubby is work-in-progress tech for web developers</h2>
				<ul>
					<li>the objective of tubby is to create a simple ui which enables users to easily instant-search (as-you-type) through a youtube channel's whole video catalog</li>
					<li>the main tubby javascript module has some functions to fetch a youtube channel's entire video catalog</li>
					<li>tubby also features some preact/mobx ui components</li>
					<li>tubby is written in typescript</li>
					<li>tubby is free and open source</li>
				</ul>
			</section>
			<section class="tubby-videos">
				<h2>demo featuring <a href="https://www.youtube.com/user/JordanPetersonVideos">jordan b peterson's youtube channel</a></h2>
				<div class="tubby-demo"></div>
			</section>
		</main>
		<script src="dist/tubby.global.bundle.js"></script>
		<script>
			const apiKey = "AIzaSyCqh3LYa_ikbnZJv0_Iird9Wk6ysK_kZXg" // "Tubby Demo Key"
			const playlistId = "UUL_f53ZEJxp8TtlOkHwMV9Q" // 'uploads' playlist (all videos)
			const clock = Date.now()

			const videoGridStore = new tubby.components.VideoGridStore()
			preact.render(
				preact.h(tubby.components.VideoGrid, {store: videoGridStore}),
				document.querySelector(".tubby-demo")
			)

			tubby.getAllVideos({
				apiKey,
				playlistId,
				onVideosReceived: videos => {
					videoGridStore.videos = [...videoGridStore.videos, ...videos]
					console.log(`tubby returned ${videoGridStore.videos.length} videos after ${Date.now() - clock} ms`)
				}
			})
			.then(videos => {
				console.log(`tubby finished all ${videos.length} videos after ${Date.now() - clock} ms`)
			})

			// // if you only have the channel id, this method is equivalent but slower (one extra round trip)
			// tubby.getAllVideosForChannel({apiKey, channelId, onVideosReceived})

			// // if you can't even find the channel id,
			// //  try this: https://github.com/JohnnyTheTank/youtube-channel-name-converter
		</script>
	</body>
</html>
